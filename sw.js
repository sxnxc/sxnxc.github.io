self.addEventListener("install",t=>{self.skipWaiting()}),self.addEventListener("notificationclick",t=>{const i=t.notification;var o=t.action,{chatid:n,chanid:e,by:t}=i.data;"close"===o?(console.log("action close for notification",i.data),i.close()):"open"===o?(console.log("action open for notification",i.data),clients.openWindow(`https://hyze.io/#${e}/${n}/${t}`)):(clients.openWindow(`https://hyze.io/#${e}/${n}/${t}`),i.close())}),self.addEventListener("notificationclose",t=>{t=t.notification;console.log("closed notification",t.data)}),self.addEventListener("push",t=>{console.log(t);var{title:i,txt:o,chatid:n,chanid:e,by:a}=t.data.json();t.waitUntil(self.registration.showNotification(i,{body:o,tag:e,icon:"https://tests.peter.sh/resources/icons/4.png",vibrate:[100,50,100],data:{chatid:n,chanid:e,by:a},requireInteraction:!1,actions:[{action:"open",title:"open message"}]}))});